import{_ as n,o as a,c as e,O as l}from"./chunks/framework.cef5bead.js";const h=JSON.parse('{"title":"Setup Nginx https server","description":"nginx example for setting up static file server and serving in https","frontmatter":{"date":"2022-12-27T00:00:00.000Z","title":"Setup Nginx https server","tags":["Nginx"],"description":"nginx example for setting up static file server and serving in https"},"headers":[],"relativePath":"posts/setup-nginx-https-server.md","filePath":"posts/setup-nginx-https-server.md"}'),t={name:"posts/setup-nginx-https-server.md"};function p(o,s,r,i,c,F){return a(),e("div",null,s[0]||(s[0]=[l(`<h2 id="installation" tabindex="-1">Installation <a class="header-anchor" href="#installation" aria-label="Permalink to &quot;Installation&quot;">​</a></h2><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki dracula"><code><span class="line"><span style="color:#50FA7B;">sudo</span><span style="color:#F8F8F2;"> </span><span style="color:#F1FA8C;">apt</span><span style="color:#F8F8F2;"> </span><span style="color:#F1FA8C;">update</span></span>
<span class="line"><span style="color:#50FA7B;">sudo</span><span style="color:#F8F8F2;"> </span><span style="color:#F1FA8C;">apt</span><span style="color:#F8F8F2;"> </span><span style="color:#F1FA8C;">install</span><span style="color:#F8F8F2;"> </span><span style="color:#F1FA8C;">nginx</span></span></code></pre></div><h2 id="config-file" tabindex="-1">Config file <a class="header-anchor" href="#config-file" aria-label="Permalink to &quot;Config file&quot;">​</a></h2><p>This is a simplified example, please refer <a href="https://www.nginx.com/resources/wiki/start/topics/examples/full/" target="_blank" rel="noreferrer">nginx full example</a> for more details.</p><p>Use <code>nginx -t -c &lt;config.file&gt;</code> to test the configuration file and fix error.</p><div class="language-txt"><button title="Copy Code" class="copy"></button><span class="lang">txt</span><pre class="shiki dracula"><code><span class="line"><span style="color:#F8F8F2;">pid     /nginx-install-dir/nginx.pid;</span></span>
<span class="line"><span style="color:#F8F8F2;">events {</span></span>
<span class="line"><span style="color:#F8F8F2;">  worker_connections  1024;  ## Default: 1024</span></span>
<span class="line"><span style="color:#F8F8F2;">}</span></span>
<span class="line"><span style="color:#F8F8F2;">http {</span></span>
<span class="line"><span style="color:#F8F8F2;">    include mime.types;</span></span>
<span class="line"><span style="color:#F8F8F2;">    log_format   main &#39;$remote_addr - $remote_user [$time_local]  $status &#39;</span></span>
<span class="line"><span style="color:#F8F8F2;">      &#39;&quot;$request&quot; $body_bytes_sent &quot;$http_referer&quot; &#39;</span></span>
<span class="line"><span style="color:#F8F8F2;">      &#39;&quot;$http_user_agent&quot; &quot;$http_x_forwarded_for&quot;&#39;;</span></span>
<span class="line"><span style="color:#F8F8F2;">    access_log /nginx-install-dir/log/access.log;</span></span>
<span class="line"><span style="color:#F8F8F2;">    error_log /nginx-install-dir/log/error.log;</span></span>
<span class="line"><span style="color:#F8F8F2;">    server {</span></span>
<span class="line"><span style="color:#F8F8F2;">        listen 80;</span></span>
<span class="line"><span style="color:#F8F8F2;">        server_name _;</span></span>
<span class="line"><span style="color:#F8F8F2;">        return 301 https://$host$request_uri;</span></span>
<span class="line"><span style="color:#F8F8F2;">    }</span></span>
<span class="line"><span style="color:#F8F8F2;">    server {</span></span>
<span class="line"><span style="color:#F8F8F2;">        listen              443 ssl;</span></span>
<span class="line"><span style="color:#F8F8F2;">        ssl_certificate     /nginx-install-dir/certs/ennkee.com_bundle.crt;</span></span>
<span class="line"><span style="color:#F8F8F2;">        ssl_certificate_key /nginx-install-dir/certs/ennkee.com.key;</span></span>
<span class="line"><span style="color:#F8F8F2;">        ssl_protocols       TLSv1 TLSv1.1 TLSv1.2;</span></span>
<span class="line"><span style="color:#F8F8F2;">        ssl_ciphers         HIGH:!aNULL:!MD5;</span></span>
<span class="line"><span style="color:#F8F8F2;">        server_name   ennkee.com www.ennkee.com;</span></span>
<span class="line"><span style="color:#F8F8F2;">        error_log     /nginx-install-dir/log/error.log;</span></span>
<span class="line"><span style="color:#F8F8F2;">        error_page    404    /data/www/404.html;</span></span>
<span class="line"><span style="color:#F8F8F2;"></span></span>
<span class="line"><span style="color:#F8F8F2;">        location / {</span></span>
<span class="line"><span style="color:#F8F8F2;">            root /data/www;</span></span>
<span class="line"><span style="color:#F8F8F2;">            index index.html index.htm;</span></span>
<span class="line"><span style="color:#F8F8F2;">        }</span></span>
<span class="line"><span style="color:#F8F8F2;">    }</span></span>
<span class="line"><span style="color:#F8F8F2;">}</span></span></code></pre></div><h2 id="setup-scripts-for-start-stop-query" tabindex="-1">Setup scripts for start/stop/query <a class="header-anchor" href="#setup-scripts-for-start-stop-query" aria-label="Permalink to &quot;Setup scripts for start/stop/query&quot;">​</a></h2><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki dracula"><code><span class="line"><span style="color:#6272A4;"># start.sh</span></span>
<span class="line"><span style="color:#50FA7B;">/usr/sbin/nginx</span><span style="color:#F8F8F2;"> </span><span style="color:#BD93F9;">-c</span><span style="color:#F8F8F2;"> </span><span style="color:#FF79C6;">&lt;</span><span style="color:#F1FA8C;">config.fil</span><span style="color:#F8F8F2;">e</span><span style="color:#FF79C6;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6272A4;"># stop.sh</span></span>
<span class="line"><span style="color:#50FA7B;">/usr/sbin/nginx</span><span style="color:#F8F8F2;"> </span><span style="color:#BD93F9;">-c</span><span style="color:#F8F8F2;"> </span><span style="color:#FF79C6;">&lt;</span><span style="color:#F1FA8C;">config.fil</span><span style="color:#F8F8F2;">e</span><span style="color:#FF79C6;">&gt;</span><span style="color:#F8F8F2;"> </span><span style="color:#BD93F9;">-s</span><span style="color:#F8F8F2;"> </span><span style="color:#F1FA8C;">stop</span></span></code></pre></div><h2 id="reference" tabindex="-1">Reference <a class="header-anchor" href="#reference" aria-label="Permalink to &quot;Reference&quot;">​</a></h2><ul><li><a href="https://www.nginx.com/resources/wiki/start/topics/tutorials/commandline/" target="_blank" rel="noreferrer">https://www.nginx.com/resources/wiki/start/topics/tutorials/commandline/</a></li><li><a href="https://www.nginx.com/resources/wiki/start/topics/examples/full/" target="_blank" rel="noreferrer">https://www.nginx.com/resources/wiki/start/topics/examples/full/</a></li><li><a href="https://nginx.org/en/docs/http/configuring_https_servers.html" target="_blank" rel="noreferrer">https://nginx.org/en/docs/http/configuring_https_servers.html</a></li><li><a href="http://nginx.org/en/docs/beginners_guide.html#:~:text=By%20default%2C%20the%20configuration%20file,%2Flocal%2Fetc%2Fnginx%20" target="_blank" rel="noreferrer">http://nginx.org/en/docs/beginners_guide.html#:~:text=By default%2C the configuration file,%2Flocal%2Fetc%2Fnginx </a>.</li><li><a href="https://cheatography.com/hulj/cheat-sheets/nginx-config/" target="_blank" rel="noreferrer">https://cheatography.com/hulj/cheat-sheets/nginx-config/</a></li><li><a href="https://nginx.org/en/docs/switches.html" target="_blank" rel="noreferrer">https://nginx.org/en/docs/switches.html</a></li></ul>`,10)]))}const u=n(t,[["render",p]]);export{h as __pageData,u as default};
